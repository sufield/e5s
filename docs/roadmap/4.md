1. Update the registry mutators to be package-private

   * In `internal/adapters/outbound/inmemory/registry.go` (dev build):

     * Rename `Seed(...)` → `seed(...)` (lowercase s).
     * Rename `Seal()` → `seal()` (lowercase s).
     * Keep `FindBySelectors(...)` and `ListAll(...)` exported.
   * Update their comments to say “internal use by factory only.”

2. Seal the registry inside the factory and return the interface

   * In `internal/adapters/outbound/compose/inmemory.go` (dev build), change `CreateRegistry` to:

     * Return `ports.IdentityMapperRegistry` instead of `*inmemory.InMemoryRegistry`.
     * After constructing `reg := inmemory.NewInMemoryRegistry()`, loop through `cfg.Workloads` (or `workloads []dto.WorkloadEntry`) and call `reg.seed(...)` for each mapper.
     * Call `reg.seal()` after seeding, before returning.
     * Return `reg` as `ports.IdentityMapperRegistry`.
   * Remove any code outside the factory that calls `Seed`, `Seal`, or touches registry internals.

3. Remove manual seeding logic from development bootstrap

   * In `internal/app/bootstrap_dev.go`:

     * After `cfg := configLoader.Load(...)`, do:

       ```go
       server, _ := factory.CreateServer(ctx, cfg.TrustDomain, tdParser, docProvider)
       registry, _ := factory.CreateRegistry(ctx, cfg.Workloads, idParser) // already seeded+sealed
       attestor := factory.CreateAttestor(cfg.Workloads)
       agent, _ := factory.CreateAgent(ctx, cfg.AgentSpiffeID, server, registry, attestor, idParser, docProvider)
       ```
     * Do NOT loop over workloads in bootstrap to register/seed anything.
     * Do NOT call any `SealRegistry`/`SeedRegistry` helpers. Delete those calls if they exist.

4. Add timeout enforcement in `bootstrap_dev.go`

   * At the very top of `Bootstrap(...)`, insert:

     ```go
     if _, hasDeadline := ctx.Deadline(); !hasDeadline {
         var cancel context.CancelFunc
         ctx, cancel = context.WithTimeout(ctx, 10*time.Second)
         defer cancel()
     }
     ```
   * This must exist in code since the doc claims bootstrap enforces a default timeout.

5. Fix production wiring so prod code cannot see dev concepts

   * In the production factory (`compose/spire.go` or similar), define something like:

     ```go
     func (f *SPIREAdapterFactory) CreateAgent(ctx context.Context) (ports.Agent, error) {
         // returns ProductionAgent which talks to SPIRE Workload API
     }
     ```
   * Do NOT expose `CreateRegistry`, `CreateAttestor`, or `CreateServer` on the production factory.
   * Remove any prod code that passes `registry`, `attestor`, or `server` into `CreateAgent`.
   * Update production bootstrap so it only does:

     ```go
     factory, _ := compose.NewSPIREAdapterFactory(ctx, spireConfig)
     agent, _ := factory.CreateAgent(ctx)
     ```

6. Adjust the Production Flow wording in code comments

   * In the production agent code (`production_agent.go` or equivalent), update the comment for the fetch flow:

     * Replace “extracts calling process credentials (UID/PID)” with:

       ```go
       // SPIRE Agent gathers attestation data for this workload using its configured
       // workload attestor (unix, k8s, etc.) and asks SPIRE Server for an SVID.
       ```
   * This avoids implying only unix attestation in prod.

7. Add “dev-only CA” guard and comment

   * In `internal/adapters/outbound/inmemory/server.go` (dev build):

     * Make sure the file starts with `//go:build dev`.
     * Add a comment at top:

       ```go
       // SECURITY NOTE: This CA is deterministic and for development only.
       // It MUST NOT be used in production.
       ```
     * Optionally add:

       ```go
       func devBuildGuard() {} // called in NewInMemoryServer() so the intent is obvious
       ```

8. Unify build tag story in code

   * Pick one convention for dev code. Recommended:

     * All in-memory control plane files use `//go:build dev`.
   * Ensure those same files are not compiled in production.
   * Remove any `//go:build !production` or mixed tag conventions unless you are actually using them.
   * Update any leftover prod-visible files to not import `inmemory` types.
